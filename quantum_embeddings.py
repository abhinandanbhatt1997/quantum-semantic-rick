import numpy as np
import matplotlib.pyplot as plt

from sentence_transformers import SentenceTransformer
from qiskit import QuantumCircuit, transpile
from qiskit_aer import Aer
from sklearn.preprocessing import MinMaxScaler

# === Load sentence transformer model ===
model = SentenceTransformer('all-MiniLM-L6-v2')

# === Input sentence ===
email_text = "Dear Abhinandan Bhatt 5, Suggest Ideas for Mann Ki Baat's 123rd Episode, Participate in Nation-Building Activities & More!                                                                                                                                                                                                                                                                                                          MyGov <no-reply@sampark.gov.in>                                                                                                                                                                                   Mon, Jun 16, 9:36‚ÄØPM (6 days ago)                                                                                                                                                                                 to me                                                                                                                                                                                                                                                                                                                                                                                                                               Having trouble reading this email? View it in your mobile/ web browser                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Monday, June 16, 2025                                                                                                                                                                                             Dear Abhinandan Bhatt 5,                                                                                                                                                                                          Check out some of the latest highlights from MyGov                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Hindi Odia Punjabi Bangla Gujarati Tamil Kannada Assamese Malayalam                                                                                                                                                                                                                                                                                                                                                                 line                                                                                                                                                                                                              MyGov                                                                                                                                                                                                                                                                                                                                                                                                                               Badalta Bharat Mera Anubhav                                                                                                                                                                                                                                                                                                                                                                                                                 Badalta Bharat Mera Anubhav                                                                                                                                                                                       Participate in various activities & showcase your experience of India‚Äôs incredible 11 years of change                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Participate Now                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Suggest ideas for the 123rd Episode of                                                                                                                                                                            Mann Ki Baat                                                                                                                                                                                                      on 29th June 2025                                                                                                                                                                                                                                                                                                                                                                                                                   Share Your Ideas                                                                                                                                                                                                                                                                                                                                                                                                            Mann Ki Baat                                                                                                                                                                                                                                                                                                                                                                                                                        Know How India is Moving                                                                                                                                                                                                                                                                                                                                                                                                                    Transforming India - Viksit Bharat                                                                                                                                                                                Know How India is Moving Towards Becoming a Viksit Bharat Every Second, Every Minute!                                                                                                                                                                                                                                                                                                                                               Check Now                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       MyGov Pulse - June Edition                                                                                                                                                                                                                                                                                                                                                                                                                  MyGov Pulse - June Edition                                                                                                                                                                                        Get in-depth insights on 11 years of 'Seva, Sushasan, Garib Kalyan', under the leadership of PM Narendra Modi                                                                                                                                                                                                                                                                                                                       Read Here                                                                                                                                                                                                                                                                                                                                                                                                                   do                                                                                                                                                                                                                                                                                                                                                                                                                                          Bharat Matters - Vol 2 Issue 2, June 2025 Edition                                                                                                                                                                 Know all about Operation Sindoor - confluence of India‚Äôs policy, intent, & decisiveness                                                                                                                                                                                                                                                                                                                                             Read Here                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Campaign                                                                                                                                                                                                                                                                                                                                                                                                                                    MORE CAMPAIGNS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Independence Day 2025                                                                                                                                                                                                                                                                                                                                                                                                               Ignite your patriotic spirit! Participate in various contests & honour India's legacy of courage & unity                                                                                                                                                                                                                                                                                                                            Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                          RMS 2025-26 Wheat Procurement at MSP                                                                                                                                                                                                                                                                                                                                                                                                Participate in various activities & join the movement for empowered farmers & informed citizens!                                                                                                                                                                                                                                                                                                                                    Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                          One Nation One Mission - End Plastic Pollution                                                                                                                                                                                                                                                                                                                                                                                      Become a part of the mission to eliminate single-use plastic & adopt eco-friendly habits                                                                                                                                                                                                                                                                                                                                            Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                  do                                                                                                                                                                                                                                                                                                                                                                                                                                          DO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Illustrating Cooperation - Comics for Change Contest                                                                                                                                                                                                                                                                                                                                                                                Celebrate International Year of Cooperation by illustrating success stories of Indian agriculture                                                                                                                                                                                                                                                                                                                                   Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                          Words of Cooperation - The Agricultural Cooperative Movement Essay Contest                                                                                                                                                                                                                                                                                                                                                          Write for rural empowerment & explore the transformative power of agricultural cooperatives                                                                                                                                                                                                                                                                                                                                         Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                          Radio Jingle Competition for Income Tax Department                                                                                                                                                                                                                                                                                                                                                                                  Educate, engage, empower! Turn your voice into a powerful jingle & make a difference                                                                                                                                                                                                                                                                                                                                                Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                          Video Making Contest on Introduction of New Offences in NCL                                                                                                                                                                                                                                                                                                                                                                         Make videos on the introduction of new offences & win exciting cash prizes!                                                                                                                                                                                                                                                                                                                                                         Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                  SURVEY                                                                                                                                                                                                                                                                                                                                                                                                                                      SURVEY                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Study on Estimation of India‚Äôs Per Capita Sustainable Energy and Electricity Consumption                                                                                                                                                                                                                                                                                                                                            Know how much energy an empowered, sustainable India needs? Share your input to help shape smarter, greener policies                                                                                                                                                                                                                                                                                                                Take the Survey                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                                                                                                                                                                                                                                  Quiz                                                                                                                                                                                                                                                                                                                                                                                                                                        QUIZ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Agricultural Cooperation Quiz                                                                                                                                                                                                                                                                                                                                                                                                       Do you know all about India‚Äôs cooperative power? Take the quiz & learn about their impact on rural India!                                                                                                                                                                                                                                                                                                                           Take The Quiz                                                                                                                                                                                                                                                                                                                                                                                                               do                                                                                                                                                                                                                                                                                                                                                                                                                                          Beat the Heat ‚Äì National Heatwave Awareness Quiz 2025                                                                                                                                                                                                                                                                                                                                                                               Scorching summer ahead? Be ready before it hits! Learn to tackle heatwave risks & spread awareness                                                                                                                                                                                                                                                                                                                                  Take The Quiz                                                                                                                                                                                                                                                                                                                                                                                                               do                                                                                                                                                                                                                                                                                                                                                                                                                                          International Day of Yoga 2025 Quiz                                                                                                                                                                                                                                                                                                                                                                                                 Test your knowledge with the quiz & celebrate the spirit of Yoga!                                                                                                                                                                                                                                                                                                                                                                   Take The Quiz                                                                                                                                                                                                                                                                                                                                                                                                               do                                                                                                                                                                                                                                                                                                                                                                                                                                  innovate                                                                                                                                                                                                                                                                                                                                                                                                                                    INNOVATE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Bharatiya Rhyme/Poem competition - ' 'Baalpan ki Kavita''                                                                                                                                                                                                                                                                                                                                                                           Submit your traditional or folk-inspired poems & help shape India's foundational learning!                                                                                                                                                                                                                                                                                                                                          Participate Now                                                                                                                                                                                                                                                                                                                                                                                                             do                                                                                                                                                                                                                ...  ."

# === Get embedding ===
embedding = model.encode(email_text)

# === Normalize and reduce ===
scaler = MinMaxScaler(feature_range=(0, np.pi / 2))  # for Ry rotation
embedding_scaled = scaler.fit_transform(embedding.reshape(-1, 1)).flatten()

# Limit to 8 dimensions (you can go higher)
reduced_vector = embedding_scaled[:8]

# === Build circuit ===
qc = QuantumCircuit(len(reduced_vector), len(reduced_vector))
for i, val in enumerate(reduced_vector):
    qc.ry(val, i)
qc.measure(range(len(reduced_vector)), range(len(reduced_vector)))

# === Simulate ===
backend = Aer.get_backend('qasm_simulator')
job = backend.run(transpile(qc, backend), shots=1024)
counts = job.result().get_counts()

# === Show Results ===
print("üì® Email Text:", email_text)
print("üß† Reduced Embedding:", reduced_vector)
print("‚öõÔ∏è Measurement Counts:", counts)

# Plot
plt.figure(figsize=(6, 3))
plt.bar(counts.keys(), counts.values(), color="lightcoral")
plt.title("Quantum Measurement - Sentence Embedding")
plt.xlabel("Bitstring Outcome")
plt.ylabel("Frequency")
plt.xticks(rotation=45)
plt.tight_layout()
plt.show()
